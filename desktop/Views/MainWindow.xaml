<Window x:Class="desktop.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:views="clr-namespace:desktop.Views"
        Title="Contact Manager" Height="490" Width="800"
        ResizeMode="NoResize">

    <Grid Background="White" Margin="5 0 5 0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="2*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 顶部导航按钮 -->
        <StackPanel Grid.Row="0" Orientation="Vertical" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Top">
                <Button Command="{Binding NavigateToContactListCommand}" Content="Contact List" Margin="5 0 20 0" />
                <Button Command="{Binding NavigateToAddContactCommand}" Content="Add Contact" Margin="0 0 20 0" />
            </StackPanel>
            <hc:Divider LineStrokeThickness="2" LineStroke="{DynamicResource DarkOpacityBrush}" Margin="5 5 5 0" />
            <hc:Divider LineStrokeThickness="2" LineStroke="{DynamicResource DarkOpacityBrush}" Margin="5 0 5 0" />
        </StackPanel>

        <!-- 页面内容区域 -->
        <ContentControl Background="Black" BorderBrush="Gray" Content="{Binding CurrentViewModel}"
                        Padding="10" Margin="5" Grid.Row="1"
                        ContentTemplateSelector="{StaticResource ViewModelViewSelector}" />

        <!-- 消息通知区域 -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Hidden"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Top"
                      Margin="0,10,10,0"
                      x:Name="GrowlBox"
                      Background="Transparent"
                      Grid.RowSpan="3">
            <StackPanel hc:Growl.Token="SuccessMsg" VerticalAlignment="Top" HorizontalAlignment="Right" />
        </ScrollViewer>

        <!-- 底部分割线 -->
        <StackPanel Grid.Row="2" Orientation="Vertical">
            <hc:Divider LineStrokeThickness="2" LineStroke="{DynamicResource DarkOpacityBrush}" Margin="5 0 5 0" />
            <hc:Divider LineStrokeThickness="2" LineStroke="{DynamicResource DarkOpacityBrush}" Margin="5 0 5 0" />

            <!-- 底部行，包含底部按钮和闪烁点 -->
            <Grid HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" /> 
                    <!-- 左侧按钮区 -->
                    <ColumnDefinition Width="*" /> 
                    <!-- 中间版权区 -->
                    <ColumnDefinition Width="Auto" />
                    <!-- 右侧闪烁点 -->
                </Grid.ColumnDefinitions>

                <!-- 底部按钮区域 -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                    <Button Command="{Binding NavigateToContactListCommand}" Content="Contact List" Margin="5 0 20 0" />
                    <Button Command="{Binding NavigateToAddContactCommand}" Content="Add Contact" Margin="0 0 20 0" />
                </StackPanel>
                
                <!-- 中间的版权信息 -->
                <TextBlock Grid.Column="1" DockPanel.Dock="Top" Text="© 2024-Forever By Arete" VerticalAlignment="Center" 
                           HorizontalAlignment="Left" FontSize="12" Foreground="Gray" />

                <!-- 右下角固定的闪烁点用户控件 -->
                <views:StatusPotsView Grid.Column="2" VerticalAlignment="Center" Margin="0,0,5,0" />
            </Grid>
        </StackPanel>
    </Grid>
</Window>